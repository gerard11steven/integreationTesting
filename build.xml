<?xml version="1.0" encoding="UTF-8"?>
<project name="integerationTest" default="build" basedir=".">

	<tstamp>
		<format property="time" pattern="MM/dd/yyyy HH:mm:ss"/>
	</tstamp>
	
	<property name="commit-message" value="ant update (${time})"/>
	<target name="build" description="Commits all changes to version git">
		<git command="pull" />
		<echo message="Commiting all changes with message ${commit-message}"/>
		<git command="add">
			<args>
				<arg value="." />
			</args>
		</git>
		<git command="commit">
			<args>
				<arg value="-am ${commit-message}" />
			</args>
		</git>
		<git command="push" />
	</target>
	
	<echo>"Build complete, starting testing"</echo>
	<target name="test" depends="build" description="start da testing!!">
		<input message="Enter test number (used to create the results file):" addproperty="newResults" />
	
	</target>
	
	<macrodef name="git">
		<attribute name="command" />
		<attribute name="dir" default="" />
		<element name="args" optional="true" />
		<sequential>
			<echo message="git @{command}" />
			<exec executable="git" dir="@{dir}">
				<arg value="@{command}" />
				<args/>
			</exec>
		</sequential>
	</macrodef>	
</project>